# Website

This is the repository for [www.alexgose.com](https://alexgose.com), which is currently hosted on [github pages](https://pages.github.com/).  You can use the source code here as a template for generating your own website using [Pelican](https://docs.getpelican.com/en/stable/), with the [pelican-bootstrap3](https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3) theme, in a [Docker](https://www.docker.com/) container.  Alternatively, you can follow the [instructions](https://docs.getpelican.com/en/stable/install.html) for installing Pelican on your own machine.  

To use the code in this repository for your own website, you will need to modify the [Makefile](Makefile) and configuration (.py) files appropriately.  These files were automatically generated by the `pelican-quickstart` command, which is installed with Pelican.  You will also have to create your own github repository. The [instructions](https://docs.getpelican.com/en/stable/tips.html) explain how the [ghp-imports](https://github.com/davisp/ghp-import) program publishes a website.  This program is used inside of the docker container.

## Getting Started

First, if you don't already have Docker installed on your machine, then follow the installation [instructions](https://docs.docker.com/install/) for your particular operating system.

### Local Build

We'll begin by building the [www.alexgose.com](https://alexgose.com) website locally.  This is a good intermediate step before building your own website.  We will convert all of the markdown files in the "content" directory into html files in a separate "output" directory.  As long as Docker is installed, you should be able to build the html files, independent of which operating system you use.  However, the instructions here are specifically for a Linux machine. 

Download the files from this repository to the directory that you want to use for building the website.  If you are using a Linux operating system, then this can be done at the command line using git as follows:

```
$ git clone https://github.io/alexgose/website 
```

Next, build the "pelican" Docker image by entering the following at the command line:

```
$ docker build -t pelican .
```

Finally, we run pelican inside of a Docker container:

```
$ docker run --rm -it -p 8000:8000 \
    -v $(pwd)/content:/website/content:ro \
    -v $(pwd)/output:/website/output pelican make publish
```

This should produce the website files in the "output" directory.  

**Note:** you may have to replace each appearance of `$(pwd)` above with the path to the current working directory.  The above command will work without modification if you are using bash with Linux.

### Development Server

If you successfully followed the instructions for a local build above, then you can build and serve the website locally using the following command:

```
$ docker run --rm -it -p 8000:8000 \
    -v $(pwd)/content:/website/content:ro \
    -v $(pwd)/output:/website/output pelican make devserver
```

You can see the website (locally) by opening a browser and visiting [http://127.0.0.1:8000](http://127.0.0.1:8000).  The note above about replacing `$(pwd)` with the path to the current working directory applies here as well.  On Linux you can shut down the local server by pressing "Ctrl+C" in the command window.

### Publishing to Github Pages

If you followed all the instructions above, then you can copy the files in this repository into your own Github repository.  Download those files into a new directory on your machine.   Next, you will need to modify [Makefile](Makefile), [pelicanconfig.py](pelicanconfig.py), and [publishconfig.py](publishconfig.py) appropriately for your website.  Alternatively, you can create these three files by going to a new empty directory on your machine and using the following command:

```
$ docker run -it -v $(pwd)/config:/website/config pelican 
```

You should see a new command prompt similar to the following:

```
root@7dda5392b12f:/website#
```

At this command prompt enter `cd config`.  Next, enter `pelican-quickstart`.  This will take you through a series of questions that will be used to generate the files, along with other files that you won't need.  Be sure to answer yes to the question "Do you want to upload your website using GitHub Pages?"  Finally, enter `exit` at the command prompt when you are done to exit the running Docker container.  

This will create a new directory "config" on your machine with the three files inside.  You can use these files to replace the three files in the directory where you build your website; however, you will most likely need to modify the Makefile further.  In particular, compare the "github" target in the Makefile in this repository to the one you created.  You can delete the "config" folder when you are done.

Assuming you are in the directory where you plan to build your website, create a new docker image named "pelican-build": 

```
$ docker build -t pelican-build .
```

This image contains the configuration files for your website.  Finally, publish your website on github pages using the following command:

```
$ docker run --rm -it -p 8000:8000 \
    -v $(pwd)/content:/website/content:ro \
    -v $(pwd)/output:/website/output pelican-build make github 
```

You will need to enter your username and password for your github account. This will add the output html files to the "gh-pages" branch of your github repository.  

## Authors

Alexander H Gose

## License

The contents of the [content](content) directory are released under the [CC BY-SA 4.0](LICENSE-CC) Creative Commons license.  The [Makefile](Makefile), [pelicanconfig.py](pelicanconfig.py), and [publishconfig.py](publishconfig.py) files are modified files from the Pelican project and are therefore covered under the [AGPL](https://github.com/getpelican/pelican/blob/master/LICENSE) license.  All other files, including the [Dockerfile](Dockerfile) and this [README.md](README.md) file, are released under the [MIT](LICENSE-MIT) license.

## Acknowledgements

Thank you to all those who contributed to the projects mentioned in this "README.md" file.
