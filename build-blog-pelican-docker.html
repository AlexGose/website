<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Build a Blog using Pelican, Docker, and Github Pages - Alex Gose</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://alexgose.github.io/website/build-blog-pelican-docker.html">

        <meta name="author" content="Alex Gose" />
        <meta name="keywords" content="Pelican,Python,Docker,Github-Pages" />
        <meta name="description" content="How to use a Docker container running Pelican to build a blog website hosted on Github Pages." />

        <meta property="og:site_name" content="Alex Gose" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Build a Blog using Pelican, Docker, and Github Pages"/>
        <meta property="og:url" content="https://alexgose.github.io/website/build-blog-pelican-docker.html"/>
        <meta property="og:description" content="How to use a Docker container running Pelican to build a blog website hosted on Github Pages."/>
        <meta property="article:published_time" content="2019-11-23" />
            <meta property="article:section" content="blog" />
            <meta property="article:tag" content="Pelican" />
            <meta property="article:tag" content="Python" />
            <meta property="article:tag" content="Docker" />
            <meta property="article:tag" content="Github-Pages" />
            <meta property="article:author" content="Alex Gose" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://alexgose.github.io/website/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://alexgose.github.io/website/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://alexgose.github.io/website/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://alexgose.github.io/website/theme/css/style.css" type="text/css"/>

        <link href="https://alexgose.github.io/website/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Alex Gose ATOM Feed"/>

        <link href="https://alexgose.github.io/website/feeds/blog.atom.xml" type="application/atom+xml" rel="alternate"
              title="Alex Gose blog ATOM Feed"/>
</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://alexgose.github.io/website/" class="navbar-brand">
Alex Gose            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://alexgose.github.io/website/pages/about.html">
                             About Me
                          </a></li>
                        <li class="active">
                            <a href="https://alexgose.github.io/website/category/blog.html">Blog</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://alexgose.github.io/website/build-blog-pelican-docker.html"
                       rel="bookmark"
                       title="Permalink to Build a Blog using Pelican, Docker, and Github Pages">
                        Build a Blog using Pelican, Docker, and Github Pages
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2019-11-23T00:00:00+00:00"> Sat 23 November 2019</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://alexgose.github.io/website/tag/pelican.html">Pelican</a>
        /
	<a href="https://alexgose.github.io/website/tag/python.html">Python</a>
        /
	<a href="https://alexgose.github.io/website/tag/docker.html">Docker</a>
        /
	<a href="https://alexgose.github.io/website/tag/github-pages.html">Github-Pages</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><img alt="container-bird.jpg" src="https://alexgose.github.io/website/images/container-bird-small.jpg"></p>
<p>Birds flying near a container ship (<a href="https://pixabay.com/photos/container-freighter-seafaring-elbe-1612960/">source</a>)</p>
<h2>Introduction</h2>
<p>The <a href="https://alexgose.com/selecting-blog-software.html">last blog post</a> explained why you might want to use a <a href="https://docker.com">Docker</a> container running <a href="https://blog.getpelican.com/">Pelican</a> to publish your website if you are starting a blog.  This post will provide detailed instructions.  </p>
<p>Although these instructions are for Ubuntu Linux (Xenial 16.04), the procedure for other operating systems should be similar.  This should be good enough to get you started, but you will have to eventually modify the <a href="https://raw.githubusercontent.com/AlexGose/website/062beca904b94abcda254d824a57eec2e5eb236b/Dockerfile">Dockerfile</a> if you want to change the theme or include more plugins.  Familiarity with git and the command line are assumed.</p>
<h2>Step 1: Install Docker</h2>
<p>You will need to install the Community Edition of Docker if you haven't already.  The official <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">instructions</a> for Ubuntu are good.  See the <a href="https://docs.docker.com/install/">install</a> page for other operating systems.  Be sure to run the <code>hello-world</code> image to verify that docker was installed correctly by entering the command <code>sudo docker run hello-world</code> at the command line.</p>
<h2>Step 2: Create a Github Account</h2>
<p>If you haven't already, be sure to <a href="https://github.com">sign up</a> for a Github account.  As mentioned in the last post, there are alternatives, but these instructions are specifically for <a href="https://pages.github.com">Github Pages</a>.  </p>
<h2>Step 3: Create a New Public Repo</h2>
<p>You will need to create a new repository for your website.  Click on "Repositories" at the top of your github webpage, then click the green "new" button.  At the new webpage, type in a name for your repository, such as "mywebsite".  Check the box next to "Initialize this repository with a README".  You should keep the "Public" radio button highlighted.  The webpage should look similar to the image below: </p>
<p><img alt="new-repository-mywebsite.png" src="https://alexgose.github.io/website/images/new-repository-mywebsite.png"></p>
<p>Click the green "Create Repository" button at the bottom of the page.  </p>
<p>Open a command line session on your machine (Ctrl+Alt+T in Ubuntu).  Move into the directory where you would like to keep the files for your website:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~/Documents 
</pre></div>


<p>Clone the newly created git repository to your machine, replacing <code>username</code> with your github username and <code>mywebsite</code> with the name of your repository:</p>
<div class="highlight"><pre><span></span>$ git clone https://github.com/username/mywebsite.git
</pre></div>


<p>Move into the newly created directory with the same name as your repository:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> mywebsite
</pre></div>


<p>Next, create a <code>content</code> directory:</p>
<div class="highlight"><pre><span></span>mkdir content
</pre></div>


<h2>Step 4: Build the Pelican Docker Image</h2>
<p>Download the docker and requirements files: </p>
<div class="highlight"><pre><span></span>$ curl -O https://raw.githubusercontent.com/AlexGose/website/062beca904b94abcda254d824a57eec2e5eb236b/Dockerfile 
$ curl -O https://raw.githubusercontent.com/AlexGose/website/f9e09b0cc56eec4a1840ccbb1c2270f468b5574c/requirements.txt
</pre></div>


<p>You should see a file named <code>Dockerfile</code> in the current directory if you enter <code>ls</code> at the command line.  Open up the file in a text editor (e.g., by entering <code>nano Dockerfile</code> at the command line), and type a <code>#</code> in front of the last three lines to comment them out:</p>
<div class="highlight"><pre><span></span><span class="k">WORKDIR</span><span class="s"> /website</span>
<span class="c">#COPY pelicanconf.py /website/</span>
<span class="c">#COPY publishconf.py /website/</span>
<span class="c">#COPY Makefile /website/</span>
</pre></div>


<p>Save the file and exit the text editor (Ctrl+O and Ctrl+X in nano).</p>
<p>Next, build the docker image, which we will name <code>pelican</code>:</p>
<div class="highlight"><pre><span></span>$ sudo docker build -t pelican .
</pre></div>


<p>A lot of output will be printed to the screen as Docker installs the required software.  This may take some time.  You should see a message indicating that the image was created successfully at the end.  You should also see the image listed when you type the following:</p>
<div class="highlight"><pre><span></span>$ sudo docker images
</pre></div>


<h2>Step 5: Create the Build and Configuration Files</h2>
<p>Next, we will run the <code>pelican-quickstart</code> program in the docker container:</p>
<div class="highlight"><pre><span></span>$ sudo docker run -it --rm -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/website pelican pelican-quickstart
</pre></div>


<p>You will be prompted to answer a series of questions to create the build and configuration files:</p>
<div class="highlight"><pre><span></span>&gt; Where do you want to create your new web site? [.] 
&gt; What will be the title of this web site? &quot;My Website&quot;
&gt; Who will be the author of this web site? John Doe
&gt; What will be the default language of this web site? [en] 
&gt; Do you want to specify a URL prefix? e.g., https://example.com   (Y/n) n
&gt; Do you want to enable article pagination? (Y/n) 
&gt; How many articles per page do you want? [10] 
&gt; What is your time zone? [Europe/Paris] 
&gt; Do you want to generate a tasks.py/Makefile to automate generation and publishing? (Y/n) 
&gt; Do you want to upload your website using FTP? (y/N) 
&gt; Do you want to upload your website using SSH? (y/N) 
&gt; Do you want to upload your website using Dropbox? (y/N) 
&gt; Do you want to upload your website using S3? (y/N) 
&gt; Do you want to upload your website using Rackspace Cloud Files? (y/N) 
&gt; Do you want to upload your website using GitHub Pages? (y/N) y
&gt; Is this your personal page (username.github.io)? (y/N) 
Done. Your new project is available at /website
</pre></div>


<p>Be sure to answer "y" when asked if you will upload your website to Github Pages.  When you are done, you will see a number of new files and directories if you enter <code>ls</code> at the command line.  This is a good time to commit and push the changes to your remote github repository if you haven't done so already:</p>
<div class="highlight"><pre><span></span>$ git add .
$ git commit -m <span class="s2">&quot;initial upload&quot;</span>
$ git push origin master
</pre></div>


<h2>Step 6: Modify the Build and Configuration Files</h2>
<p>Next, we will modify the build and configuration files. Open <code>publishconf.py</code> in a text editing program (e.g., by entering <code>sudo nano publishconf.py</code>), and add the name of your website URL to the end of the <code>SITEURL</code> variable:</p>
<div class="highlight"><pre><span></span>SITEURL = &#39;https://username.github.io/mywebsite&#39;
</pre></div>


<p>Be sure to replace <code>username</code> with your github username and <code>mywebsite</code> with the name of your repository in the URL.  Save this file and open <code>pelicanconf.py</code> next.  You can modify the timezone by changing the quoted text after <code>TIMEZONE</code>.  You can look up the possible values <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">here</a>.  Comment out the lines for the <code>LINKS</code> and <code>SOCIAL</code> variables, putting a <code>#</code> at the beginning of each line, if you do not wish to include those on your website.  If you wish to include links to your social media sites, then you can see an example of how this is done <a href="https://raw.githubusercontent.com/AlexGose/website/2ce3f6f8832678bda021c8ba2874c62a0997447a/pelicanconf.py">here</a>.</p>
<p>At the bottom of this file add these lines for the <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3">pelican-bootstrap3 theme</a>:</p>
<div class="highlight"><pre><span></span><span class="n">THEME</span> <span class="o">=</span> <span class="s1">&#39;themes/pelican-bootstrap3&#39;</span>
<span class="n">PLUGIN_PATHS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plugins/&#39;</span><span class="p">,</span> <span class="p">]</span>
<span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;i18n_subsites&#39;</span><span class="p">,</span> <span class="p">]</span>
<span class="n">JINJA_ENVIRONMENT</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;extensions&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;jinja2.ext.i18n&#39;</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>


<p>After saving and closing this file, open the <code>Makefile</code> in a text editor.  Here, we will add a new <code>.git</code> target and modify the existing <code>github</code> target.  The bottom of the file should look like this when you are done, with your username replacing <code>username</code> and your repository name replacing <code>mywebsite</code>:</p>
<div class="highlight"><pre><span></span>.git: 
    git init
    git remote add origin -f https://github.com/username/mywebsite 

github: publish | .git
    ghp-import -m &quot;generate pelican website&quot; $(OUTPUTDIR)
    git push origin gh-pages 

.PHONY: html help clean regenerate serve serve-global devserver publish github
</pre></div>


<p>Save, commit, and push the changes to github as we did previously:</p>
<div class="highlight"><pre><span></span>$ git add .
$ git commit -m <span class="s2">&quot;add build and configuration files&quot;</span>
$ git push origin master
</pre></div>


<p>From this point on, I'll assume you will commit and push changes to github whenever you modify a file in this directory.</p>
<h2>Step 7: Create Some Content</h2>
<p>Move into the <code>content</code> directory:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> content
</pre></div>


<p>Here is where you will store the content of your blog website in the form of markdown files, which are specially formatted plain text files.  Markdown is easy to learn if you don't already know it.  Check out <a href="https://www.markdownguide.org/basic-syntax">this website</a> for example.  I recommend learning how to format headers and hyperlinks first.  You can pick up the rest later as needed.</p>
<p>Using a text editor, open a new file named "testpost.md", and add the following lines:</p>
<div class="highlight"><pre><span></span>Title: Test Blog Post
Date: 2019-01-01
Tags: Test, Blog
Summary: A test blog post

<span class="gu">##</span> Level 2 Header

This is a test blog post.
</pre></div>


<p>Save this markdown file in the current <code>content</code> directory, and move back to the parent directory:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ..
</pre></div>


<p>Be sure to read the <a href="https://docs.getpelican.com/en/stable/content.html">Pelican documentation</a> for more information on writing content.</p>
<h2>Step 8: Build A Local Development Server</h2>
<p>Open up the <code>Dockerfile</code> in a text editor and remove the <code>#</code> from the beginning of the last three lines to uncomment them.  Save the changes and re-build the docker image:</p>
<div class="highlight"><pre><span></span>sudo docker build -t pelican .
</pre></div>


<p>Now, we will build the website locally to see how it looks before publishing it on Github Pages:</p>
<div class="highlight"><pre><span></span>sudo docker run --rm -it -p <span class="m">8000</span>:8000 -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/content:/website/content:ro -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/output:/website/output pelican make devserver 
</pre></div>


<p>You can see the website by visiting <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a> in a browser.  To stop the development server type Ctrl+C in the terminal window.</p>
<h2>Step 9: Publish the Website</h2>
<p>Next, we publish the website to github:</p>
<div class="highlight"><pre><span></span>sudo docker run --rm -it -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/content:/website/content:ro -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/output:/website/output pelican make github
</pre></div>


<p>You will be prompted for your username and password while the <code>ghp-import</code> program sends output files into the "gh-pages" branch of your github repository.  After waiting a number of minutes, your website should be accessible at "https://username.github.io/mywebsite" with the username and repository name changed appropriately.</p>
<h2>Conclusions</h2>
<p>Hopefully these instructions are enough to get you started with publishing your blog website using Pelican running in a Docker container.  You should be able to create new content with the development server running.  You just need to refresh the browser page to see the changes.  Once you push the changes to github, you can publish the website to Github Pages by entering the same command we used in Step 9.</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://linkedin.com/in/alexgose"><i class="fa fa-linkedin-square fa-lg"></i> linkedin</a></li>
    <li class="list-group-item"><a href="https://github.com/alexgose"><i class="fa fa-github-square fa-lg"></i> github</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Github -->
<li class="list-group-item">
  <h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
  <div id="gh_repos">
    <p class="list-group-item">Status updating...</p>
  </div>
</li>
<!-- End Sidebar/Github -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2019 Alex Gose
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>                <p><small>  <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en"><img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
    Content
  licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">Creative Commons Attribution-ShareAlike 4.0 International License</a>, except where indicated otherwise.
</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://alexgose.github.io/website/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://alexgose.github.io/website/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://alexgose.github.io/website/theme/js/respond.min.js"></script>



<!-- GitHub JS Code -->
<script type="text/javascript">
$(document).ready(function () {
  if (!window.jXHR) {
    var jxhr = document.createElement('script');
    jxhr.type = 'text/javascript';
    jxhr.src = 'https://alexgose.github.io/website/theme/js/jXHR.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(jxhr, s);
  }

  github.showRepos({
    user: 'AlexGose',
    count: 5,
    skip_forks: false,
    target: '#gh_repos'
  });
});
</script>
<script src="https://alexgose.github.io/website/theme/js/github.js" type="text/javascript"></script>
<!-- End GitHub JS Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-149099290-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->


</body>
</html>